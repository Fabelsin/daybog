1. Оновлення системи та встановлення пакетів

apt update 

Пояснення: Оновлює локальний список пакетів із репозиторіїв. Це гарантує, що система знає про останні версії програмного забезпечення перед встановленням.


apt install nano libpam-pwquality 

Пояснення: Встановлює текстовий редактор nano (для редагування файлів конфігурації) та бібліотеку libpam-pwquality (модуль PAM для перевірки надійності паролів).

2. Налаштування політики паролів (pwquality.conf)

nano /etc/security/pwquality.conf 

Пояснення: Відкриває файл конфігурації pwquality.conf у редакторі nano для налаштування вимог до складності пароля.


minlen = 8 

Пояснення: Встановлює мінімальну довжину пароля у 8 символів.


dcredit = -1 

Пояснення: Вимагає наявності мінімум 1 цифри в паролі (від'ємне значення означає обов'язкову вимогу).


ucredit = -1 

Пояснення: Вимагає наявності мінімум 1 великої літери (uppercase) в паролі.

3. Налаштування PAM для паролів (common-password)

nano /etc/pam.d/common-password 

Пояснення: Відкриває файл конфігурації PAM, що відповідає за обробку паролів.

Примітка: У вихідному тексті пропущено пробіл (nano/etc...), але команда має бути nano /etc....


password requisite pam_pwquality.so retry=3 

Пояснення: Підключає модуль перевірки якості пароля. requisite означає, що якщо перевірка не пройдена, зміна пароля припиняється. retry=3 дає користувачеві 3 спроби ввести правильний пароль.


password required pam_unix.so remember=3 

Пояснення: Стандартний модуль Unix для зміни пароля. Параметр remember=3 запам'ятовує 3 останні паролі та забороняє їх повторне використання (як зазначено в ).

4. Налаштування блокування акаунту (common-auth)

nano /etc/pam.d/common-auth 

Пояснення: Відкриває файл конфігурації PAM для аутентифікації користувачів.


auth required pam_faillock.so preauth silent deny=3 unlock_time=300 

Пояснення: Цей рядок запускається перед введенням пароля (preauth). Він перевіряє, чи користувач вже заблокований. deny=3 блокує після 3 невдалих спроб, unlock_time=300 блокує на 300 секунд (5 хвилин). silent не повідомляє користувачу про блокування на цьому етапі.


auth [success=1 default=bad] pam_unix.so 

Пояснення: Виконує стандартну перевірку пароля Unix. Якщо успішно (success=1), система пропускає наступний рядок (стрибає через 1 рядок). Якщо ні — вважається помилкою (default=bad).


auth [default=die] pam_faillock.so authfail deny=3 unlock_time=300 

Пояснення: Цей рядок спрацьовує, якщо попередній етап (введення пароля) був невдалим (authfail). Він записує невдалу спробу. default=die означає негайне переривання процесу входу.


auth sufficient pam_faillock.so authsucc 

Пояснення: Якщо вхід успішний (authsucc), цей рядок скидає лічильник невдалих спроб для цього користувача.

5. Створення користувача user666

useradd -m user666 

Пояснення: Створює нового користувача з іменем user666. Прапорець -m створює для нього домашню директорію.


passwd user666 

Пояснення: Запускає утиліту для встановлення пароля для користувача user666.


usermod -s /usr/sbin/nologin user666 

Пояснення: Змінює оболонку (shell) користувача на /usr/sbin/nologin. Це забороняє цьому користувачеві входити в систему інтерактивно (через консоль).

6. Створення інших користувачів

useradd -m user13 

Пояснення: Створює користувача user13 з домашньою директорією.


passwd user13 

Пояснення: Встановлює пароль для user13.


useradd -m student 

Пояснення: Створює користувача student з домашньою директорією.


passwd student 

Пояснення: Встановлює пароль для student.

7. Обмеження часу входу (pam_time)

nano /etc/pam.d/common-account 

Пояснення: Відкриває загальну конфігурацію облікових записів PAM.


account required pam_time.so 

Пояснення: Додає модуль pam_time, який перевіряє часові обмеження при спробі входу.


nano /etc/security/time.conf 

Пояснення: Відкриває файл конфігурації для налаштування конкретних часових правил.

Примітка: У документі пропущено пробіл (nano/etc...).

login;*; student; A10800-1800 

Пояснення: Правило доступу.

login: Застосовується до сервісу входу в систему.

*: Застосовується до будь-якого терміналу.

student: Стосується користувача student.

Al0800-1800: Дозволяє вхід лише з 08:00 до 18:00 (у документі написано A10800, ймовірно мається на увазі Al — All days, всі дні).

8. Перевірка та MOTD

nano /etc/motd 

Пояснення: Відкриває файл "Message of the Day". Текст у цьому файлі показується користувачеві після успішного входу.

Примітка: У документі пропущено пробіл (nano/etc...).


passwd user13 

Пояснення: Повторна зміна пароля для user13 (можливо, для тестування історії паролів або просто повторна команда).


su - user13 

Пояснення: Спроба переключитися на користувача user13 (Substitute User) для перевірки входу.


faillock --user user13 

Пояснення: Показує кількість невдалих спроб входу та статус блокування для користувача user13.


logout 

Пояснення: Завершує сеанс поточного користувача.
